---
const navItems = [
  { label: "Features", href: "#features" },
  { label: "Pricing", href: "#pricing" },
  { label: "FAQ", href: "#faq" },
];

const installUrl = "#"; // Will be replaced with actual Shopify App Store URL
---

<!-- Mobile Menu Overlay -->
<div
  id="mobile-menu"
  class="fixed inset-0 z-50 bg-white mobile-menu lg:hidden"
  aria-hidden="true"
>
  <div class="flex flex-col h-full">
    <!-- Close Button -->
    <div class="flex justify-end p-4">
      <button
        id="close-menu-btn"
        type="button"
        class="p-2 text-gray-500 hover:text-gray-900 transition-colors"
        aria-label="Close menu"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>

    <!-- Navigation Links -->
    <nav class="flex-1 flex flex-col items-center justify-center gap-8">
      {navItems.map((item) => (
        <a
          href={item.href}
          class="text-2xl font-medium text-gray-700 hover:text-emerald-600 transition-colors mobile-nav-link"
        >
          {item.label}
        </a>
      ))}

      <!-- Install CTA -->
      <a
        href={installUrl}
        class="mt-8 btn btn-primary text-lg px-8 py-4"
      >
        Install Free
      </a>
    </nav>
  </div>
</div>

<script>
  function initMobileMenu() {
    const mobileMenu = document.getElementById('mobile-menu');
    const openMenuBtn = document.getElementById('open-menu-btn');
    const closeMenuBtn = document.getElementById('close-menu-btn');
    const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');

    if (!mobileMenu || !openMenuBtn || !closeMenuBtn) return;

    function openMenu() {
      mobileMenu.classList.add('open');
      mobileMenu.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden';
    }

    function closeMenu() {
      mobileMenu.classList.remove('open');
      mobileMenu.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
    }

    openMenuBtn.addEventListener('click', openMenu);
    closeMenuBtn.addEventListener('click', closeMenu);

    // Close menu when clicking nav links
    mobileNavLinks.forEach(link => {
      link.addEventListener('click', closeMenu);
    });

    // Close menu on escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && mobileMenu.classList.contains('open')) {
        closeMenu();
      }
    });
  }

  // Initialize on page load
  initMobileMenu();

  // Re-initialize on page navigation (for Astro view transitions)
  document.addEventListener('astro:page-load', initMobileMenu);
</script>
